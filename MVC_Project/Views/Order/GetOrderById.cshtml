@model MVC_Project.ViewModel.OrderWithCustomerAndOrderListVM
<link rel="stylesheet" type="text/css" href="/css/bootstrap-FileUpload.min.css" />

<style>
    @@media (min-width: 1025px) {
        .h-custom {
            height: 100vh !important;
        }
    }

    .horizontal-timeline.items .items {
        border-top: 2px solid var(--accent-color); /* Removed extra semicolon */
    }

        .horizontal-timeline.items .items .items-list {
            position: relative;
            margin-right: 0;
        }

            .horizontal-timeline.items .items .items-list:before {
                content: "";
                position: absolute;
                height: 8px;
                width: 8px;
                border-radius: 50%;
                background-color: #ddd;
                top: 0;
                margin-top: -5px;
            }

        .horizontal-timeline.items .items .items-list {
            padding-top: 15px;
        }
</style>

<section style="">
    
    <div class="container mt-4">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-lg-10 col-xl-8 mt-10 mb-10">
                <div class="card border-top border-bottom border-3" style="border-color: var(--accent-color) !important;">
                    <div class="card-body p-5">

                        <p class="lead fw-bold mb-5" style="color: var(--accent-color);">Order Details</p>

                        <div class="row">
                            <div class="col mb-3">
                                <p class="small text-muted mb-1">Customer Name</p>
                                <p>@Model.Customer.FullName</p>
                            </div>
                            <div class="col mb-3">
                                <p class="small text-muted mb-1">Date</p>
                                <p>@Model.OrderDate.ToShortDateString()</p>
                            </div>

                            <div class="col mb-3">
                                <p class="small text-muted mb-1">Order No.</p>
                                <p>@Model.OrderId</p>
                            </div>
                        </div>

                        <div class="mx-n5 px-5 py-4" style="background-color: var(--accent-color);">
                            <div class="row">
                                @if (Model.OrderItems.Any())
                                {
                                    <h4>Order Items:</h4>
                                    <table>
                                        <!-- Moved <table> tag outside of the foreach loop -->
                                        <tr>
                                            <th>Book Title</th>
                                            <th>Book Price</th>
                                        </tr>
                                        @foreach (var orderItem in Model.OrderItems)
                                        {
                                            <tr>
                                                <td style="width:50%">@orderItem.Book.Title</td>
                                                <td>@orderItem.Book.Price</td>
                                            </tr>
                                        }
                                    </table>
                                }
                                else
                                {
                                    <p>No items in this order.</p>
                                }
                            </div>
                        </div>

                        <div class="row my-4">
                            <div class="col-md-4 offset-md-8 col-lg-3 offset-lg-9">
                                <p class="lead fw-bold mb-0" style="color: var(--accent-color);">@Model.TotalAmount.ToString("C")</p>
                            </div>
                            <div class="btn-wrap">
                                <a href="/order/index" class="btn btn-outline-accent btn-accent-arrow">
                                    Browse Orders <i class="icon icon-ns-arrow-right"></i>
                                </a>
                            </div>
                        </div>


                        
                        <div class="row">
                            <div class="col-lg-12">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br />
</section>
<section id="special-offer" class="bookshelf pb-5 mb-5">

    <div class="section-header align-center">
        <div class="title">
            <span>Admin Exclusive</span>
        </div>
        <h2 class="section-title ">Order List</h2>
    </div>
   
        <div class="container ">
            <table class="table table-primary table-striped table-hover shadow">
                <thead>
                    <tr>

                        <th scope="col">&nbsp;&nbsp;#</th>
                        <th scope="col">Title</th>
                        <th scope="col">Price</th>

                    </tr>
                </thead>
                <tbody>
                    @foreach (OrderItem item in Model.OrderItems)
                    {
                        <tr class="p-3">
                          @*   @{
                            TotalPrice += item.Book.Price;
                                count++;
                            } *@
                        <td> <a href="/Book/Details/@item.Book.BookId"></a></td>

                        <td>item.Book.Title</td>
                        <td>item.Book.Price</td>


                            <td>
                                <div class="btn-wrap ">
                                <a href="/Book/Details/@item.Book.BookId" class="btn btn-outline-accent btn-accent-arrow" style="margin:0px ">
                                        See Details<i class="icon icon-ns-arrow-right"></i>
                                    </a>
                                </div>
                            </td>

                        </tr>
                    }
                    <tr>

                        <td>Total Price</td>
                        <td></td>
                    <td>@Model.TotalAmount.ToString("C")</td>


                    </tr>
                </tbody>

            </table>

        </div>
        <div class="container d-flex text-right">
            <div class="row md-12">
                <div>
                <h2 class="ms-5">Total Price:@Model.TotalAmount.ToString("C")</h2>

                </div>
                <div class="btn-wrap">
                    <a href="#" class="btn btn-outline-accent btn-accent-arrow" id="buyNowButton">
                        Buy now <i class="icon icon-ns-arrow-right"></i>
                    </a>
                </div>
            </div>

        </div>

    
 
</section>

<script src="~/lib/jquery/dist/jquery.js"></script>
<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="/js/authorIndexScript.js"></script>
<partial name="_SelectedBookParial"> </partial>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/js/SelectedBooks.js"></script>
<script src="/js/jquery-1.11.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>